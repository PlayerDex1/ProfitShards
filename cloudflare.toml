[build]
command = "cd client && npm run build"
output_dir = "client/dist/public"

[build.environment]
NODE_VERSION = "18"

# Redirecionamentos específicos (devem vir antes do SPA routing)
[[redirects]]
from = "/profile"
to = "/perfil"
status = 301
force = true

[[redirects]]
from = "/calculadora"
to = "/"
status = 301
force = true

[[redirects]]
from = "/calculator"
to = "/"
status = 301
force = true

[[redirects]]
from = "/calc"
to = "/"
status = 301
force = true

[[redirects]]
from = "/planner"
to = "/perfil?tab=planner"
status = 301
force = true

[[redirects]]
from = "/analytics"
to = "/perfil?tab=activity"
status = 301
force = true

# SPA routing - deve ser o último
[[redirects]]
from = "/*"
to = "/index.html"
status = 200